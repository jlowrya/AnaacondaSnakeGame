<!DOCTYPE html>
<html>
<head>
    <title>My Snake Game</title>
</head>
<style>
    .grid-container {
        align-items: center;
        display: grid;
        grid-template-columns: repeat(10, 50px);
        grid-template-rows: auto;
        background-color: black;
        border-style: solid;
        width:500px;
        column-gap: 1px;
        row-gap: 1px;
    }

    .grid-item {
        background-color: white;
        border: black;
        height: 50px;
        width: 50px;
        justify-self: center;
    }

    .snake {
        background-color: green;
    }

    .dead {
        background-color: red;
    }
</style>
<body>
    <h1>Welcome to Snake Game!</h1>
    <div id="grid" class="grid-container">
    </div>

    <script>
        const numColumns = 10;
        const numRows = 10;

        const startBox = 0;
        const moveDirection = 'right'

        const grid = document.getElementById("grid");

        function makeSnake(e){
            e.target.classList.add("snake");
        }

        function getNextCellId(oldPositionId, direction){
            switch(direction){
                case "right":
                    console.log("Getting next id for direction ", direction);
                    return oldPositionId+1;
                case "left":
                    console.log("Getting next id for direction ", direction);
                    return oldPositionId-1;
                case "up":
                    console.log("Getting next id for direction ", direction);
                    return oldPositionId-numRows;
                case "down":
                    console.log("Getting next id for direction ", direction);
                    return oldPositionId+numRows;
            }
        }

        function isOutOfBounds(newPositionId, direction){
            return newPositionId<0 || newPositionId>=numColumns*numRows || (direction==="right" && newPositionId%numColumns===0) || (direction==="left" && newPositionId%numColumns===(numColumns-1));
        }

        function move(direction){
            const oldPosition = document.querySelector("div.snake");
            oldPosition.classList.remove('snake');
            let newPositionId = getNextCellId(parseInt(oldPosition.id), direction);
            console.log('Moving from position ', oldPosition.id, ' to ', newPositionId);
            let newPosition = document.getElementById(newPositionId);
            if(isOutOfBounds(newPositionId, direction)){
                oldPosition.classList.add('dead');
            }
            else{
                newPosition.classList.add("snake");
            }
        }


        for(let i=0; i<numColumns*numRows;i++){
            let box = document.createElement("div");
            box.id = `${i}`;
            box.classList.add('grid-item');
            grid.append(box);
        }

        let snake = document.getElementById(startBox);
        snake.classList.add("snake");
        // let intervalId = setInterval(move, 100);
        // console.log('Interval id: ', intervalId);
        document.onkeydown = function(e){
            switch(e.key){
                case "ArrowUp":
                    move("up");
                    break;
                case "ArrowDown":
                    move("down");
                    break;
                case "ArrowLeft":
                    move("left");
                    break;
                case "ArrowRight":
                    move("right");
                    break;
            }
        }



    </script>
</body>
</html>
